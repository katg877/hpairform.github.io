<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Application Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 2rem;
    }
    form {
      max-width: 700px;
      padding: 2rem;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    input, textarea, select, button {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
    }
    button {
      background: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      margin-top: 1rem;
    }
    button:hover {
      background: #0056b3;
    }
    .error {
      color: red;
      font-size: 0.9rem;
      margin-top: 0.2rem;
    }
    .success-message {
      margin-top: 1rem;
      color: green;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>Job Application Form</h2>
  <form id="applicationForm" novalidate>

    <!-- Personal Information -->
    <label for="fullName">Full Name:</label>
    <input type="text" id="fullName" name="fullName" required>
    <span class="error" id="fullNameError"></span>

    <label for="address">Address:</label>
    <textarea id="address" name="address" rows="3" required></textarea>
    <span class="error" id="addressError"></span>

    <label for="phone">Phone Number:</label>
    <input type="tel" id="phone" name="phone" placeholder="123-456-7890" required>
    <span class="error" id="phoneError"></span>

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>
    <span class="error" id="emailError"></span>

    <label for="linkedin">LinkedIn URL:</label>
    <input type="url" id="linkedin" name="linkedin" placeholder="https://www.linkedin.com/in/username" required>
    <span class="error" id="linkedinError"></span>

    <label for="nationality">Nationality:</label>
    <input type="text" id="nationality" name="nationality" required>
    <span class="error" id="nationalityError"></span>

    <label for="language">Preferred Language:</label>
    <select id="language" name="language" required>
      <option value="">Select</option>
      <option value="English">English</option>
      <option value="Spanish">Spanish</option>
      <option value="French">French</option>
      <option value="Other">Other</option>
    </select>
    <span class="error" id="languageError"></span>

    <!-- File Upload -->
    <label for="cv">Upload CV (PDF only):</label>
    <input type="file" id="cv" name="cv" accept=".pdf" required>
    <span class="error" id="cvError"></span>

    <!-- Custom Questions -->
    <label for="q1">Why do you want to join HPAIR?</label>
    <textarea id="q1" name="q1" rows="4" required></textarea>
    <span class="error" id="q1Error"></span>

    <label for="q2">What are your strengths?</label>
    <textarea id="q2" name="q2" rows="4" required></textarea>
    <span class="error" id="q2Error"></span>

    <label for="q3">Do you have any experience with leadership? If yes, explain.</label>
    <textarea id="q3" name="q3" rows="4"></textarea>

    <button type="submit">Submit</button>
    <div class="success-message" id="successMessage"></div>
  </form>

  <script>
    const form = document.getElementById("applicationForm");

    const fields = {
      fullName: document.getElementById("fullName"),
      address: document.getElementById("address"),
      phone: document.getElementById("phone"),
      email: document.getElementById("email"),
      linkedin: document.getElementById("linkedin"),
      nationality: document.getElementById("nationality"),
      language: document.getElementById("language"),
      cv: document.getElementById("cv"),
      q1: document.getElementById("q1"),
      q2: document.getElementById("q2"),
      q3: document.getElementById("q3")
    };

    const errors = {
      fullName: document.getElementById("fullNameError"),
      address: document.getElementById("addressError"),
      phone: document.getElementById("phoneError"),
      email: document.getElementById("emailError"),
      linkedin: document.getElementById("linkedinError"),
      nationality: document.getElementById("nationalityError"),
      language: document.getElementById("languageError"),
      cv: document.getElementById("cvError"),
      q1: document.getElementById("q1Error"),
      q2: document.getElementById("q2Error")
    };

    function validateFullName() {
      if (fields.fullName.value.trim().length < 3) {
        errors.fullName.textContent = "Full name must be at least 3 characters.";
        return false;
      }
      errors.fullName.textContent = "";
      return true;
    }

    function validateAddress() {
      if (fields.address.value.trim() === "") {
        errors.address.textContent = "Address is required.";
        return false;
      }
      errors.address.textContent = "";
      return true;
    }

    function validatePhone() {
      const regex = /^\d{3}-\d{3}-\d{4}$/;
      if (!regex.test(fields.phone.value)) {
        errors.phone.textContent = "Phone number must be in format 123-456-7890.";
        return false;
      }
      errors.phone.textContent = "";
      return true;
    }

    function validateEmail() {
      const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!regex.test(fields.email.value)) {
        errors.email.textContent = "Enter a valid email address.";
        return false;
      }
      errors.email.textContent = "";
      return true;
    }

    function validateLinkedIn() {
      try {
        const url = new URL(fields.linkedin.value);
        if (!url.hostname.includes("linkedin.com")) throw "Invalid LinkedIn URL";
        errors.linkedin.textContent = "";
        return true;
      } catch {
        errors.linkedin.textContent = "Enter a valid LinkedIn URL.";
        return false;
      }
    }

    function validateNationality() {
      if (fields.nationality.value.trim() === "") {
        errors.nationality.textContent = "Nationality is required.";
        return false;
      }
      errors.nationality.textContent = "";
      return true;
    }

    function validateLanguage() {
      if (fields.language.value === "") {
        errors.language.textContent = "Please select a preferred language.";
        return false;
      }
      errors.language.textContent = "";
      return true;
    }

    function validateCV() {
      const file = fields.cv.files[0];
      if (!file) {
        errors.cv.textContent = "Please upload your CV.";
        return false;
      }
      if (file.type !== "application/pdf") {
        errors.cv.textContent = "CV must be a PDF file.";
        return false;
      }
      errors.cv.textContent = "";
      return true;
    }

    function validateQ1() {
      if (fields.q1.value.trim() === "") {
        errors.q1.textContent = "This question is required.";
        return false;
      }
      errors.q1.textContent = "";
      return true;
    }

    function validateQ2() {
      if (fields.q2.value.trim() === "") {
        errors.q2.textContent = "This question is required.";
        return false;
      }
      errors.q2.textContent = "";
      return true;
    }

    // Real-time validation
    fields.fullName.addEventListener("input", validateFullName);
    fields.address.addEventListener("input", validateAddress);
    fields.phone.addEventListener("input", validatePhone);
    fields.email.addEventListener("input", validateEmail);
    fields.linkedin.addEventListener("input", validateLinkedIn);
    fields.nationality.addEventListener("input", validateNationality);
    fields.language.addEventListener("change", validateLanguage);
    fields.cv.addEventListener("change", validateCV);
    fields.q1.addEventListener("input", validateQ1);
    fields.q2.addEventListener("input", validateQ2);

    form.addEventListener("submit", function(e) {
      e.preventDefault();

      const valid =
        validateFullName() &&
        validateAddress() &&
        validatePhone() &&
        validateEmail() &&
        validateLinkedIn() &&
        validateNationality() &&
        validateLanguage() &&
        validateCV() &&
        validateQ1() &&
        validateQ2();

      const successMessage = document.getElementById("successMessage");

      if (valid) {
        successMessage.textContent = "Your application has been submitted successfully!";
        form.reset();
      } else {
        successMessage.textContent = "";
      }
    });
  </script>
</body>
</html>
